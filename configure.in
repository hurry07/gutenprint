dnl Process this file with autoconf to produce a configure script.
AC_INIT(print.c)
AM_INIT_AUTOMAKE(print,3.1.9)

dnl Checks for programs.
AC_PROG_AWK
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_YACC
AM_PROG_LEX
AC_PATH_PROG(BISON_PROG, bison)
AC_PATH_PROG(YACC_PROG, yacc)
AC_PATH_PROG(LPR_PROG, lpr)
AC_PATH_PROG(LP_PROG, lp)
AC_PATH_PROG(LPSTAT_PROG, lpstat, , $PATH:/usr/libexec:/usr/sbin:/usr/etc:/etc)
AC_PATH_PROG(LPC_PROG, lpc, , $PATH:/usr/libexec:/usr/sbin:/usr/etc:/etc)

if test -n "$LP_PROG" ; then
  LP_DEF="-DLP_COMMAND=\\\"$LP_PROG\\\""
else
  LP_DEF=""
fi

if test -n "$LPSTAT_PROG" ; then
  LPSTAT_DEF="-DLPSTAT_COMMAND=\\\"$LPSTAT_PROG\\\""
else
  LPSTAT_DEF=""
fi

if test -n "$LPR_PROG" ; then
  LPR_DEF="-DLPR_COMMAND=\\\"$LPR_PROG\\\""
else
  LPR_DEF=""
fi

if test -n "$LPC_PROG" ; then
  LPC_DEF="-DLPC_COMMAND=\\\"$LPC_PROG\\\""
else
  LPC_DEF=""
fi

AM_PATH_GIMP(1.0.0,
        [SAVE_GTK_LIBS="$GIMP_LIBS"
        SAVE_GTK_CFLAGS="$GIMP_CFLAGS"],
        AC_MSG_ERROR(Cannot find GIMP libs: Please run ldconfig as root, and make sure gimptool is on your PATH.))

dnl Checks for libraries.
dnl Checking for the Gimp does all this

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_OFF_T
AC_TYPE_SIZE_T

dnl Checks for library functions.
AC_FUNC_MEMCMP
AC_TYPE_SIGNAL

AC_SUBST(LP_DEF)
AC_SUBST(LPSTAT_DEF)
AC_SUBST(LPR_DEF)
AC_SUBST(LPC_DEF)
AC_SUBST(GIMP_LIBS)

AC_OUTPUT(Makefile)
